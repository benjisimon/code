<!DOCTYPE html>
<html>
  <head>
    <title>Morse Code Hacking</title>
    <link rel='Stylesheet' type='text/css' href=''/>
  </head>
  
  <p>Nothing to see here, it's all in the JavaScript.</p>

  <body>
    <script type='text/javascript'>
      function codeToPattern(code) {
        var dot = 100;
        var pattern = [];

        for(var i = 0; i < code.length; i++) {
          var letter = code[i];
          if(letter == ' ') {
            continue;
          } else {
            var parts = letter.split('');
            for(var j = 0; j < parts.length; j++) {
              if(j > 0) {
                pattern.push(dot);
              }
              if(parts[j] == '.') {
                pattern.push(dot);
              } else if(parts[j] == '-') {
                pattern.push(dot * 3);
              }
            }
          }
          var peek = (i + 1) == code.length ? null : code[i+1];
          if(peek == null) {
            continue;
          } else {
            pattern.push(peek == ' ' ? dot*7 : dot*3);
          }
        }
        return pattern;
      }

      function textToCode(text) {
        var code      = [];
        var letters   = text.toUpperCase().split("");
        var encoder   = { 
          A: '.-',         B: '-...',       C: '-.-.',
          D: '-..',        E: '.',          F: '..-.',
          G: '--.',        H: '....',       I: '..',
          J: '.---',       K: '-.-',        L: '.-..',
          M: '--',         N: '-.',         O: '---',
          P: '.--.',       Q: '--.-',       R: '.-.',
          S: '...',        T: '-',          U: '..-',
          V: '...-',       W: '.--',        X: '-..-',
          Y: '-.--',       Z: '--..'
        };

        for(var i = 0; i < letters.length; i ++) {
          var c = letters[i];
          if(c == ' ') {
            code.push(' ');
          } else if(encoder[c]) {
            code.push(encoder[c]);
          }
        }
        return code;
      }
      var text = "Hello World";
      var code = textToCode(text);
      var pattern = codeToPattern(code);
      console.log(text);
      console.log(code);
      console.log(pattern);

      var text = "ee ee";
      var code = textToCode(text);
      var pattern = codeToPattern(code);
      console.log(text);
      console.log(code);
      console.log(pattern);
    </script>
      
  </body>
</html>

